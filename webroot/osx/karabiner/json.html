<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>karabiner.json Reference Manual - Karabiner - Software for macOS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap core CSS -->
    <link href="/assets/bootstrap/bootstrap-3.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Documentation extras -->
    <link href="/assets/bootstrap/bootstrap-3.3.6/docs/assets/css/docs.min.css" rel="stylesheet" />
    <link href="/assets/pqrs.css.012c71be18538cb7b3c9f8bd91a51a2ac34bfcc2.7c700b139430e65fb796ee3698ec5f3ddc1db5dd.css" rel="stylesheet" />
    <link href="/assets/sparkle.css.ee7a21f32e4ae06d27096592b155cc233ffea47e.579cdb8624eca124c6457a0910175eccae84391d.css" rel="stylesheet" />

    <!-- Bootstrap extra -->
      <link href="/assets/bootstrap-prettify/prettify.css" rel="stylesheet" type="text/css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
  </head>

  <body class="">

    <!-- Docs master nav -->
    <header class="navbar navbar-fixed-top bs-docs-nav">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>

          <a href="/index.html" class="navbar-brand">pqrs.org</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse">
          <ul class="nav navbar-nav">
                <li >
                  <a href="/osx/karabiner/index.html">Karabiner</a>
                </li>
                <li class="dropdown active">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Documents
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li >
                        <a href="/osx/karabiner/document.html">Manual</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/help.html">Help</a>
                      </li>
                      <li class="active">
                        <a href="/osx/karabiner/json.html">karabiner.json Reference Manual</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/source.html">License and Source Code</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/history.html">Version History</a>
                      </li>
                  </ul>
                </li>
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Archives
                    <b class="caret"></b>
                  </a>
                  <ul class="dropdown-menu">
                      <li >
                        <a href="/osx/karabiner/seil.html">Seil</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/noejectdelay.html">NoEjectDelay</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/document_v10.html">Manual for Karabiner-10.22.0</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/gallery_v10.html">Gallery</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/xml.html">private.xml</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/faq.html">Q&amp;A</a>
                      </li>
                      <li >
                        <a href="/osx/karabiner/list.html">List of prepared settings</a>
                      </li>
                  </ul>
                </li>
                <li >
                  <a href="/osx/karabiner/pricing.html">Pricing</a>
                </li>
                <li >
                  <a href="/osx/karabiner/contact.html">Contact</a>
                </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
              <li >
                <a href="/profile.html">Profile</a>
              </li>
          </ul>
        </nav>
      </div>
    </header>

    <div class="container">
  <header>
    <div class="page-header">
      <h1>karabiner.json Reference Manual</h1>
    </div>
  </header>

  <div class="row">
    <div class="col-md-9 pqrs-docs-container">
      <section>
        <div class="page-header">
          <h1 id="location">File location</h1>
        </div>

        <table class="table">
          <tbody>
            <tr>
              <th><b>~/.config/karabiner/karabiner.json</b></th>
              <td>
                Main configuration file.<br />
                Karabiner-Elements watches this file and reload it automatically when it is updated.
              </td>
            </tr>
            <tr>
              <th><b>~/.config/karabiner/assets/complex_modifications</b></th>
              <td>
                Imported complex_modifications files.<br />
                You can use them in <b>Preferences &gt; Complex Modifications &gt; Add rule</b>.
              </td>
            </tr>
          </tbody>
        </table>


        <h2>Automation reload mechanism</h2>

        <p>
          Karabiner-Elements watches <b>~/.config/karabiner/karabiner.json</b> and reloads it if updated.
        </p>

        <p>
          The mechanism is that Karabiner-Elements watches the parent directory <b>~/.config/karabiner</b> by using the File System Events API.<br />
          Thus, Karabiner-Elements fails detecting file updates after you change the parent directory (e.g., recreate the parent directory).
        </p>


        <h2>Error messages</h2>

        <p>
          Error messages will be output into <b>~/.local/share/karabiner/log/console_user_server.log</b> if there are errors such as parse error.
        </p>

        <p>
          You can also view the error messages in <b>Karabiner-Elements Preferences &gt; Log</b>.
        </p>

        <div class="row">
          <div class="col-lg-4">
<a data-toggle="modal" href="#lightbox-1" class="thumbnail">
  <img src="img/karabiner-elements-error-log@2x.png" alt="error log" />
</a>
<div class="modal fade" id="lightbox-1" tabindex="30001">
  <div class="modal-dialog clickable" style="width: 1060px;">
    <div class="modal-content">
      <div class="modal-body">
        <img src="img/karabiner-elements-error-log@2x.png" alt="error log" style="width: 100%" />
      </div>
    </div>
  </div>
</div>
          </div>
        </div>
      </section>

      <section>
        <div class="page-header">
          <h1 id="typical-complex_modifications-examples">Typical complex_modifications examples</h1>
        </div>

        <ul>
          <li>
            <a href="#typical-complex_modifications-examples-swap-semicolon-and-colon">
              Swap <b>;</b> and <b>:</b>.
              (Equal to swap <b>;</b> and <b>shift-;</b>.)
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-change-control-h-to-delete">
              Change <b>control-h</b> to <b>delete</b>.
              (And <b>control-option-h</b> to <b>option-delete</b>.)
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-disable-command-l-on-finder">
              Disable <b>command-l</b> on Finder.
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-post-escape-if-left-control-is-pressed-alone">
              Post <b>escape</b> if <b>left_control</b> is pressed alone.
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-open-alfred-when-escape-is-held-down">
              Open <b>Alfred 3</b> if <b>escape</b> is held down.
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-change-right-shift-x2-to-mission-control">
              Change <b>right_shift x2</b> to <b>mission_control</b>.
            </a>
          </li>
          <li>
            <a href="#typical-complex_modifications-examples-simultaneous-equal-delete-to-forward-delete">
              Change <b>equal+delete</b> to <b>forward_delete</b> if these keys are pressed simultaneously.
            </a>
          </li>
        </ul>

        <div id="typical-complex_modifications-examples-swap-semicolon-and-colon">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Swap <b>;</b> and <b>:</b>.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "semicolon",
        "modifiers": {
            "mandatory": [
                "shift"
            ],
            "optional": [
                "caps_lock"
            ]
        }
    },
    "to": [
        {
            "key_code": "semicolon"
        }
    ]
},

{
    "type": "basic",
    "from": {
        "key_code": "semicolon",
        "modifiers": {
            "optional": [
                "caps_lock"
            ]
        }
    },
    "to": [
        {
            "key_code": "semicolon",
            "modifiers": [
                "left_shift"
            ]
        }
    ]
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-change-control-h-to-delete">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Change <b>control-h</b> to <b>delete</b>. (And <b>option-control-h</b> to <b>option-delete</b>.)</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "h",
        "modifiers": {
            "mandatory": [
                "control"
            ],
            "optional": [
                "caps_lock",
                "option"
            ]
        }
    },
    "to": [
        {
            "key_code": "delete_or_backspace"
        }
    ]
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-disable-command-l-on-finder">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Disable <b>command-l</b> on Finder.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "l",
        "modifiers": {
            "mandatory": [
                "command"
            ],
            "optional": [
                "caps_lock"
            ]
        }
    },
    "conditions": [
        {
            "type": "frontmost_application_if",
            "bundle_identifiers": [
                "^com\\.apple\\.finder$"
            ]
        }
    ]
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-post-escape-if-left-control-is-pressed-alone">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Post <b>escape</b> if <b>left_control</b> is pressed alone.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "left_control",
        "modifiers": {
            "optional": [
                "any"
            ]
        }
    },
    "to": [
        {
            "key_code": "left_control",
            "lazy": true
        }
    ],
    "to_if_alone": [
        {
            "key_code": "escape"
        }
    ]
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-open-alfred-when-escape-is-held-down">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Open <b>Alfred 3</b> if <b>escape</b> is held down.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "escape",
        "modifiers": {
            "optional": [
                "caps_lock"
            ]
        }
    },
    "parameters": {
        "basic.to_if_alone_timeout_milliseconds": 250,
        "basic.to_if_held_down_threshold_milliseconds": 250
    },
    "to_if_alone": [
        {
            "key_code": "escape"
        }
    ],
    "to_if_held_down": [
        {
            "shell_command": "open -a 'Alfred 3.app'"
        }
    ]
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-change-right-shift-x2-to-mission-control">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Change <b>right_shift x2</b> to <b>mission_control</b>.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "right_shift",
        "modifiers": {
            "optional": [
                "any"
            ]
        }
    },
    "to": [
        {
            "key_code": "mission_control"
        }
    ],
    "conditions": [
        {
            "type": "variable_if",
            "name": "right_shift pressed",
            "value": 1
        }
    ]
},

{
    "type": "basic",
    "from": {
        "key_code": "right_shift",
        "modifiers": {
            "optional": [
                "any"
            ]
        }
    },
    "to": [
        {
            "set_variable": {
                "name": "right_shift pressed",
                "value": 1
            }
        },
        {
            "key_code": "right_shift"
        }
    ],
    "to_delayed_action": {
        "to_if_invoked": [
            {
                "set_variable": {
                    "name": "right_shift pressed",
                    "value": 0
                }
            }
        ],
        "to_if_canceled": [
            {
                "set_variable": {
                    "name": "right_shift pressed",
                    "value": 0
                }
            }
        ]
    }
}</pre>            </div>
          </div>
        </div>

        <div id="typical-complex_modifications-examples-simultaneous-equal-delete-to-forward-delete">
          <div class="panel panel-default">
            <div class="panel-body">
              <p>Change <b>equal+delete</b> to <b>forward_delete</b> if these keys are pressed simultaneously.</p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "simultaneous": [
            {
                "key_code": "equal_sign"
            },
            {
                "key_code": "delete_or_backspace"
            }
        ],
        "modifiers": {
            "optional": [
                "any"
            ]
        }
    },
    "to": [
        {
            "key_code": "delete_forward"
        }
    ]
}</pre>            </div>
          </div>
        </div>
      </section>

      <section>
        <div class="page-header">
          <h1 id="root-data-structure">karabiner.json data structure</h1>
        </div>

        <h2>karabiner.json</h2>

<pre class="prettyprint lang-json">{
    "global": {
        ...
    },
    "profiles": [
        {
            "name": "Profile name",
            "selected": true,
            "simple_modifications": [
                ...
            ],
            "fn_function_keys": [
                ...
            ],
            "complex_modifications": {
                "parameters": {
                    ...
                },
                "rules": [
                    ...
                ]
            },
            "virtual_hid_keyboard": {
                "keyboard_type": "ansi",
                "caps_lock_delay_milliseconds": 0
            },
            "devices": [
                ...
            ]
        },
        {
            "name": "Profile name",
            "selected": false,
            ...
        },
        ...
    ]
}</pre>

        <h2 id="complex_modifications-data-structure">complex_modifications in <b>karabiner.json &gt; profiles</b></h2>

<pre class="prettyprint lang-json">{
    "complex_modifications": {
        "parameters": {
            ...
        },
        "rules": [
            {
                "description": "This description is shown in Preferences.",
                "manipulators": [
                    {
                        "type": "basic",

                        "from": from event definition,

                        "to": [
                            to event definition,
                            to event definition,
                            ...
                        ],

                        "to_if_alone": [
                            to event definition,
                            to event definition,
                            ...
                        ],

                        "to_if_held_down": [
                            to event definition,
                            to event definition,
                            ...
                        ],

                        "to_after_key_up": [
                            to event definition,
                            to event definition,
                            ...
                        ],

                        "to_delayed_action": {
                            "to_if_invoked": [
                                to event definition,
                                to event definition,
                                ...
                            ],
                            "to_if_canceled": [
                                to event definition,
                                to event definition,
                                ...
                            ]
                        },

                        "conditions": [
                            condition definition,
                            condition definition,
                            ...
                        ],

                        "parameters": {
                            ...
                        },

                        "description": "Optional description for human"
                    },
                    {
                        "type": "basic",
                        ...
                    },
                    ...
                ]
            },
            {
                "description": "...",
                "manipulators": [
                    ...
                ]
            },
            ...
        ]
    }
}</pre>      </section>

      <hr class="horizontal-separator" />

      <section>
        <div class="page-header">
          <h1 id="complex_modifications-manipulator-priority">complex_modifications manipulator priority</h1>
        </div>

        <p>
          The manipulators are evaluated from the top to the bottom and the input event is manipulated only the first matched manipulator.
        </p>

        <p>
          In other words, if there are multiple manipulators which change the same key, the manipulator placed at the top is applied and other manipulators are ignored.
        </p>


        <h2>Simple Modifications and Complex Modifications</h2>

        <p>
          Simple Modifications and Complex Modifications are independent. Thus, Simple Modifications does not affect above priority.<br />
          <a href="document.html#event-modification-chaining">Input event modification chaining (Simple Modifications, Complex Modifications, Function Keys Modifications) description.</a>
        </p>
      </section>

      <hr class="horizontal-separator" />

      <section>
        <div class="page-header">
          <h1 id="complex_modifications-manipulator-definition">complex_modifications manipulator definition</h1>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>Always <code>"type": "basic"</code></td>
            </tr>
            <tr>
              <td><code>from</code></td>
              <td><code class="required">required</code></td>
              <td>
                The name of key code, consumer key code or pointing button which you want to change.
                <a href="#from-event-definition">(detail)</a>
              </td>
            </tr>
            <tr>
              <td><code>to</code></td>
              <td><code class="optional">optional</code></td>
              <td>events which are sent when you press <code>from</code> key.</td>
            </tr>
            <tr>
              <td><code>to_if_alone</code></td>
              <td><code class="optional">optional</code></td>
              <td>events which are sent when you press <code>from</code> key alone.</td>
            </tr>
            <tr>
              <td><code>to_if_held_down</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                events which are sent when you hold down <code>from</code> key.
              </td>
            </tr>
            <tr>
              <td><code>to_after_key_up</code></td>
              <td><code class="optional">optional</code></td>
              <td>events which are sent after you release <code>from</code> key.</td>
            </tr>
            <tr>
              <td><code>to_delayed_action</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <code>to_delayed_action</code> sends <code>to_delayed_action &gt; to_if_invoked</code> events after 500 milliseconds at you press <code>from</code> key.<br />
                <code>to_delayed_action &gt; to_if_canceled</code> events are sent if you press another key between <code>from</code> key and to_delayed_action invoked. (<code>to_if_invoked</code> events are not sent if <code>to_if_canceled</code> events are sent.)
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A manipulator description for human.</td>
            </tr>
            <tr>
              <td><code>conditions</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Manipulator is applied only if condition is matched. (The frontmost application, device, etc.)
              </td>
            </tr>
            <tr>
              <td><code>parameters</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Override parameters such as <code>to_delayed_action_delay_milliseconds</code>.
              </td>
            </tr>
          </tbody>
        </table>


        <hr class="horizontal-separator" />

        <h2 id="from-event-definition">from event definition</h2>

<pre class="prettyprint lang-json">{
    "key_code": "The name of key_code",
    "consumer_key_code": "The name of consumer_key_code",
    "pointing_button": "The name of pointing_button",
    "any": "key_code or consumer_key_code or pointing_button",

    "modifiers": {
        "mandatory": [
            modifier,
            modifier,
            ...
        ],
        "optional": [
            modifier,
            modifier,
            ...
        ]
    },

    "simultaneous": [
        {
           "key_code, consumer_key_code, pointing_button or any"
        },
        {
           "key_code, consumer_key_code, pointing_button or any"
        },
        ...
    ],
    "simultaneous_options": {
        "detect_key_down_uninterruptedly": false,
        "key_down_order": "A restriction of input events order",
        "key_up_order": "A restriction of input events order",
        "key_up_when": "When key_up events are posted",
        "to_after_key_up": [
            to event definition,
            to event definition,
            ...
        ]
    }
}</pre>
        <div class="alert alert-info" role="alert">
          <p>
            Note:<br />
            <code>key_code</code>, <code>consumer_key_code</code>, <code>pointing_button</code> and <code>any</code>
            are exclusive.
            You can specify one of them.
          </p>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>key_code</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <a href="document.html#eventviewer">You can find key_code by EventViewer.</a>
                <a href="https://github.com/tekezo/Karabiner-Elements/blob/master/src/apps/PreferencesWindow/PreferencesWindow/Resources/simple_modifications.json">(list)</a>
              </td>
            </tr>
            <tr>
              <td><code>consumer_key_code</code></td>
              <td><code class="optional">optional</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>pointing_button</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <div class="alert alert-warning" role="alert">
                  Caution:<br />
                  Be careful when manipulating <code>button1</code> to avoid losing the left click button.
                </div>
              </td>
            </tr>
            <tr>
              <td><code>any</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                You can use <code>any</code> as follows.<br />
                These matches all key codes, consumer key codes or pointing buttons.
                <ul>
                  <li><code>"any": "key_code"</code></li>
                  <li><code>"any": "consumer_key_code"</code></li>
                  <li><code>"any": "pointing_button"</code></li>
                </ul>

                <div class="alert alert-warning" role="alert">
                  Caution:<br />
                  Be careful when using <code>"any": "pointing_button"</code> to avoid losing the left click button.
                </div>
              </td>
            </tr>
            <tr>
              <td><code>modifiers</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Specify modifiers. (e.g., "change control-h to delete")
                <a href="#from-event-definition-modifiers">(detail)</a>
              </td>
            </tr>
            <tr>
              <td><code>simultaneous</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Specify multiple events which are pressed simultaneously.
                <a href="#simultaneous">(detail)</a>
              </td>
            </tr>
            <tr>
              <td><code>simultaneous_options</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Options for <code>simultaneous</code>.
                <a href="#simultaneous-options">(detail)</a>
              </td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="from-event-definition-modifiers">modifiers in from event definition</h3>

        <code>modifiers</code> works as follows.

        <table class="table">
          <tbody>
            <tr>
              <th>When <code>modifiers</code> is omitted</th>
              <td>
                Events are manipulated only if modifier keys are not pressed.
              </td>
            </tr>
            <tr>
              <th>When <code>modifiers &gt; mandatory</code> is specified</th>
              <td>
                Events are manipulated if mandatory modifiers are pressed. <br />
                Mandatory modifiers are omitted from <code>to events</code>.
              </td>
            </tr>
            <tr>
              <th>When <code>modifiers &gt; optional</code> is specified</th>
              <td>
                Events are also manipulated even if optional modifiers are pressed.<br />
                Optional modifiers are kept in <code>to events</code>.
              </td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="from-event-definition-examples">Examples</h3>

        <div class="panel panel-default">
          <div class="panel-body">
            <p>Change escape to tab without <code>modifiers</code></p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "escape"
    },
    "to": [
        {
            "key_code": "tab"
        }
    ]
}</pre>
            <table class="table">
              <thead>
                <tr>
                  <th>key</th>
                  <th>manipulated</th>
                  <th>result</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>escape</td>
                  <td><b>manipulated</b></td>
                  <td>tab</td>
                </tr>
                <tr>
                  <td>left_shift + escape</td>
                  <td>not manipulated</td>
                  <td>left_shift + escape</td>
                </tr>
                <tr>
                  <td>left_control + escape</td>
                  <td>not manipulated</td>
                  <td>left_control + escape</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-body">
            <p>Change escape to tab with <code>optional modifiers</code></p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "escape",
        "modifiers": {
            "optional": [
                "left_shift",
                "left_control"
            ]
        }
    },
    "to": [
        {
            "key_code": "tab"
        }
    ]
}</pre>
            <table class="table">
              <thead>
                <tr>
                  <th>key</th>
                  <th>manipulated</th>
                  <th>result</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>escape</td>
                  <td><b>manipulated</b></td>
                  <td>tab</td>
                </tr>
                <tr>
                  <td>left_shift + escape</td>
                  <td><b>manipulated</b></td>
                  <td>left_shift + tab</td>
                </tr>
                <tr>
                  <td>left_control + escape</td>
                  <td><b>manipulated</b></td>
                  <td>left_control + tab</td>
                </tr>
                <tr>
                  <td>left_option + escape</td>
                  <td>not manipulated</td>
                  <td>left_option + escape</td>
                </tr>
                <tr>
                  <td>left_shift + left_option + escape</td>
                  <td>not manipulated</td>
                  <td>
                    left_shift + left_option + escape<br />
                    (because left_option is not in optional modifiers)
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-body">
            <p>Change control-h to delete without <code>optional modifiers</code></p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "h",
        "modifiers": {
            "mandatory": [
                "control"
            ]
        }
    },
    "to": [
        {
            "key_code": "delete_or_backspace"
        }
    ]
}</pre>
            <table class="table">
              <thead>
                <tr>
                  <th>key</th>
                  <th>manipulated</th>
                  <th>result</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>h</td>
                  <td>not manipulated</td>
                  <td>h</td>
                </tr>
                <tr>
                  <td>left_control + h</td>
                  <td><b>manipulated</b></td>
                  <td>delete_or_backspace</td>
                </tr>
                <tr>
                  <td>left_control + left_option + h</td>
                  <td>not manipulated</td>
                  <td>
                    left_control + left_option + h<br />
                    (because left_option is not in optional modifiers)
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-body">
            <p>Change control-h to delete with <code>optional modifiers</code></p>

<pre class="prettyprint lang-json">{
    "type": "basic",
    "from": {
        "key_code": "h",
        "modifiers": {
            "mandatory": [
                "control"
            ],
            "optional": [
                "caps_lock",
                "option"
            ]
        }
    },
    "to": [
        {
            "key_code": "delete_or_backspace"
        }
    ]
}</pre>
            <table class="table">
              <thead>
                <tr>
                  <th>key</th>
                  <th>manipulated</th>
                  <th>result</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>h</td>
                  <td>not manipulated</td>
                  <td>h</td>
                </tr>
                <tr>
                  <td>left_control + h</td>
                  <td><b>manipulated</b></td>
                  <td>delete_or_backspace</td>
                </tr>
                <tr>
                  <td>left_control + left_option + h</td>
                  <td><b>manipulated</b></td>
                  <td>left_option + delete_or_backspace</td>
                </tr>
                <tr>
                  <td>left_control + left_shift + h</td>
                  <td>not manipulated</td>
                  <td>
                    left_control + left_shift + h<br />
                    (because left_shift is not in optional modifiers)
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <hr class="horizontal-separator thin" />

        <h3 id="from-event-definition-modifiers-list">The list of modifiers in from definition</h3>

        <table class="table">
          <thead>
            <tr>
              <th>name</th>
              <th>description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>caps_lock</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>left_command</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>left_control</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>left_option</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>left_shift</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>right_command</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>right_control</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>right_option</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>right_shift</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>fn</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>command</code></td>
              <td>left command or right command</td>
            </tr>
            <tr>
              <td><code>control</code></td>
              <td>left control or right control</td>
            </tr>
            <tr>
              <td><code>option</code></td>
              <td>left option or right option</td>
            </tr>
            <tr>
              <td><code>shift</code></td>
              <td>left shift or right shift</td>
            </tr>
            <tr>
              <td><code>left_alt</code></td>
              <td>Alias of left_option (available since Karabiner-Elements 12.3.0)</td>
            </tr>
            <tr>
              <td><code>left_gui</code></td>
              <td>Alias of left_command (available since Karabiner-Elements 12.3.0)</td>
            </tr>
            <tr>
              <td><code>right_alt</code></td>
              <td>Alias of right_option (available since Karabiner-Elements 12.3.0)</td>
            </tr>
            <tr>
              <td><code>right_gui</code></td>
              <td>Alias of right_command (available since Karabiner-Elements 12.3.0)</td>
            </tr>
            <tr>
              <td><code>any</code></td>
              <td>any modifiers</td>
            </tr>
          </tbody>
        </table>


        <hr class="horizontal-separator thin" />

        <h3 id="simultaneous">Detail of <code>simultaneous</code></h3>

        <p>
          <code>simultaneous</code> manipulates keys which are pressed simultaneously in 50 milliseconds.
        </p>

        <h4 id="simultaneous-threshold-milliseconds">About threshold milliseconds</h4>

        <p>
          You can adjust threshold on <b>Preferences &gt; Complex Modifications &gt; Parameters</b>.
        </p>

        <div class="row">
          <div class="col-lg-4">
<a data-toggle="modal" href="#lightbox-2" class="thumbnail">
  <img src="img/karabiner-elements-simultaneous_threshold_milliseconds@2x.png" alt="simultaneous_threshold_milliseconds" />
</a>
<div class="modal fade" id="lightbox-2" tabindex="30002">
  <div class="modal-dialog clickable" style="width: 1060px;">
    <div class="modal-content">
      <div class="modal-body">
        <img src="img/karabiner-elements-simultaneous_threshold_milliseconds@2x.png" alt="simultaneous_threshold_milliseconds" style="width: 100%" />
      </div>
    </div>
  </div>
</div>
          </div>
        </div>

        <p>
          It is same as adjusting <code>basic.simultaneous_threshold_milliseconds</code> parameter in json.
        </p>

        <h4 id="simultaneous-manipulation">About manipulation</h4>

        <p>
          There are some cases <code>simultaneous</code> does not modify events.
        </p>

        <ul>
          <li><code>simultaneous</code> does not modify events if any <b>from events</b> are released before all <b>from events</b> are pressed.</li>
          <li><code>simultaneous</code> does not modify events if <b>from events</b> are interrupted by another event.</li>
        </ul>

        <p>
          For example, changing <b>a</b>+<b>s</b>+<b>d</b> to <b>mission_control</b> works as the following table.
        </p>

        <table class="table">
          <thead>
            <tr>
              <th>Input</th>
              <th>Output</th>
              <th>Note</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <ol>
                  <li><b>a</b> key_down</li>
                  <li><b>s</b> key_down</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <ol>
                  <li><b>mission_control</b></li>
                </ol>
              </td>
              <td>
                <span class="glyphicon glyphicon-ok"></span> Manipulated.
              </td>
            </tr>
            <tr>
              <td>
                <ol>
                  <li><b>s</b> key_down</li>
                  <li><b>a</b> key_down</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <ol>
                  <li><b>mission_control</b></li>
                </ol>
              </td>
              <td>
                <span class="glyphicon glyphicon-ok"></span> Manipulated.<br />
                The key order is insensitive.
              </td>
            </tr>
            <tr>
              <td>
                <ol>
                  <li><b>a</b> key_down</li>
                  <li><b>s</b> key_down</li>
                  <li><b>a</b> key_up</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <ol>
                  <li><b>a</b> key_down</li>
                  <li><b>s</b> key_down</li>
                  <li><b>a</b> key_up</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <span class="glyphicon glyphicon-remove"></span> Not manipulated.<br />
                <b>a</b> is released before all input events are pressed.
              </td>
            </tr>
            <tr>
              <td>
                <ol>
                  <li><b>a</b> key_down</li>
                  <li><b>s</b> key_down</li>
                  <li><b>f</b> key_down</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <ol>
                  <li><b>a</b> key_down</li>
                  <li><b>s</b> key_down</li>
                  <li><b>f</b> key_down</li>
                  <li><b>d</b> key_down</li>
                </ol>
              </td>
              <td>
                <span class="glyphicon glyphicon-remove"></span> Not manipulated.<br />
                Another key (<b>f</b>) is pressed before all input events are pressed.
              </td>
            </tr>
          </tbody>
        </table>

        <p>
          Note: The manipulator definition of changing <b>a</b>+<b>s</b>+<b>d</b> to <b>mission_control</b>.
        </p>

<pre class="prettyprint lang-json">{
  "type": "basic",
  "from": {
    "simultaneous": [
      {
        "key_code": "a"
      },
      {
        "key_code": "s"
      },
      {
        "key_code": "d"
      }
    ],
    "modifiers": {
      "optional": [
        "any"
      ]
    }
  },
  "to": [
    {
      "key_code": "mission_control"
    }
  ]
}</pre>
        <h4 id="simultaneous-key-up">About key_up</h4>

        <p>
          The key_up event is posted when you release any <b>from events</b>.
        </p>

        <p>
          For example, changing <b>tab</b>+<b>q</b> to <b>mission_control</b> works as the following table.
        </p>

        <table class="table">
          <thead>
            <tr>
              <th>Input</th>
              <th>Output</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <b>tab</b> key_down
              </td>
              <td>
                ---
              </td>
            </tr>
            <tr>
              <td>
                <b>q</b> key_down
              </td>
              <td>
                <b>mission_control</b> key_down
              </td>
            </tr>
            <tr>
              <td>
                <b>tab</b> key_up
              </td>
              <td>
                <b>mission_control</b> key_up
              </td>
            </tr>
            <tr>
              <td>
                <b>q</b> key_up
              </td>
              <td>
                ---
              </td>
            </tr>
          </tbody>
        </table>

        <h4 id="simultaneous-options">About <code>simultaneous_options</code></h4>

        <p>
          There are some options for <code>simultaneous</code>.
        </p>

        <table class="table">
          <thead>
            <tr>
              <th>Key</th>
              <th>Description</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <code>detect_key_down_uninterruptedly</code>
              </td>
              <td>
                Specify whether key_down detection is interrupted with unrelated events.
              </td>
              <td>
                <code>true</code> or <code>false</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>key_down_order</code>
              </td>
              <td>
                Restriction of key_down order.
              </td>
              <td>
                <code>insensitive</code>, <code>strict</code> or <code>strict_inverse</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>key_up_order</code>
              </td>
              <td>
                Restriction of key_up order.
              </td>
              <td>
                <code>insensitive</code>, <code>strict</code> or <code>strict_inverse</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>key_up_when</code>
              </td>
              <td>
                When key_up events are posted.
              </td>
              <td>
                <code>any</code> or <code>all</code>
              </td>
            </tr>
            <tr>
              <td>
                <code>to_after_key_up</code>
              </td>
              <td>
                events will be posted when all <b>from events</b> are released.
              </td>
              <td>
                An array of <b>to event definitions</b>.
              </td>
            </tr>
          </tbody>
        </table>

        <h4 id="simultaneous-options-key-down-order">About <code>simultaneous_options</code> &gt; <code>key_down_order</code></h4>

        <p>
          <code>simultaneous</code> checks the order of key_down events
          if <code>key_down_order</code> is specified and is not <code>insensitive</code>.
        </p>

        <p>
          For example, this definition manipulates <b>tab,q</b> to <b>mission_control</b> and
          does not manipulate <b>q,tab</b> events.
        </p>

<pre class="prettyprint lang-json">{
  "type": "basic",
  "from": {
    "simultaneous": [
      {
        "key_code": "tab"
      },
      {
        "key_code": "q"
      }
    ],
    "simultaneous_options": {
        "key_down_order": "strict"
    },
    "modifiers": {
      "optional": [
        "any"
      ]
    }
  },
  "to": [
    {
      "key_code": "mission_control"
    }
  ]
}</pre>
        <h4 id="simultaneous-options-key-up-order">About <code>simultaneous_options</code> &gt; <code>key_up_order</code></h4>

        <p>
          <code>simultaneous</code> checks the order of key_up events
          if <code>key_up_order</code> is specified and is not <code>insensitive</code>.
        </p>

        <div class="alert alert-info" role="alert">
          <h5>Note:</h5>
          <p><code>key_up_order</code> is ignored if <code>simultaneous_threshold_milliseconds</code> is reached.</p>
        </div>

        <p>
          For example, this definition manipulates <b>tab,q</b> to <b>mission_control</b> if the <b>tab</b> key is released before the <b>q</b> key within 500 milliseconds.<br />
          (You should set a large value to <code>simultaneous_threshold_milliseconds</code> when you use <code>key_up_order</code>.)
        </p>

        <table class="table">
          <thead>
            <tr>
              <th>Input</th>
              <th>Output</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <b>tab</b> &amp; <b>q</b> key_down
              </td>
              <td>
                ---
              </td>
            </tr>
            <tr>
              <td>
                <b>tab</b> key_up
              </td>
              <td>
                <p>
                  <b>mission_control</b> key_down<br />
                  <b>mission_control</b> key_up
                </p>

                <span class="label label-info">NOTE</span> Events will be posted just before <b>the last from event's key_up</b>.
              </td>
            </tr>
            <tr>
              <td>
                <b>q</b> key_up
              </td>
              <td>
                ---
              </td>
            </tr>
          </tbody>
        </table>

<pre class="prettyprint lang-json">{
  "type": "basic",
  "parameters": {
    "basic.simultaneous_threshold_milliseconds": 500
  },
  "from": {
    "simultaneous": [
      {
        "key_code": "tab"
      },
      {
        "key_code": "q"
      }
    ],
    "simultaneous_options": {
        "key_up_order": "strict"
    },
    "modifiers": {
      "optional": [
        "any"
      ]
    }
  },
  "to": [
    {
      "key_code": "mission_control"
    }
  ]
}</pre>
        <h4 id="simultaneous-options-key-up-when">About <code>simultaneous_options</code> &gt; <code>key_up_when</code></h4>

        Specify when key_up events are posted.

        <table class="table">
          <thead>
            <tr>
              <th>Value</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <code>any</code>
              </td>
              <td>
                Post key_up events when any key is released.
              </td>
            </tr>
            <tr>
              <td>
                <code>all</code>
              </td>
              <td>
                Post key_up events when all keys are released.
              </td>
            </tr>
          </tbody>
        </table>


        <h4 id="simultaneous-options-key-up-order">About <code>simultaneous_options</code> &gt; <code>to_after_key_up</code></h4>

        <p><code>simultaneous_options</code> &gt; <code>to_after_key_up</code> will be posted when all <b>from events</b> are released.</p>

        <p>
          This feature is typically used to clear mode flag variables when all <b>from events</b> are released.
        </p>

        Example:<br />
        <ul>
          <li>
            <a href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/mouse_keys_mode_v4.json">Mouse Keys Mode v4 json</a>
            <ul>
              <li><a href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/src/json/mouse_keys_mode_v4.json.rb">(json generator)</a></li>
              <li><a href="https://pqrs.org/osx/karabiner/complex_modifications/#mouse_keys_mode_v4">(import)</a></li>
            </ul>
          </li>
        </ul>


        <hr class="horizontal-separator" />

        <h2 id="to-event-definition">to event definition</h2>

<pre class="prettyprint lang-json">{
    "key_code": "The name of key_code",
    "consumer_key_code": "The name of consumer_key_code",
    "pointing_button": "The name of pointing_button",

    "shell_command": "shell command",

    "select_input_source": {
        "language": "language regex",
        "input_source_id": "input source id regex",
        "input_mode_id": "input mode id regex"
    },

    "set_variable": {
        "name": "variable name",
        "value": "variable value"
    },

    "mouse_key": mouse_key definition,

    "modifiers": [
        modifier,
        modifier,
        ...
    ],

    "lazy": false,
    "repeat": true,
    "halt": false,
    "hold_down_milliseconds": 0
}</pre>
        <div class="alert alert-info" role="alert">
          <p>
            Note:<br />
            <code>key_code</code>, <code>consumer_key_code</code>, <code>pointing_button</code>,
            <code>shell_command</code>, <code>select_input_source</code> and <code>set_variable</code>
            are exclusive.
            You can specify one of them.
          </p>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>key_code</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <a href="document.html#eventviewer">You can find key_code by EventViewer.</a>
                <a href="https://github.com/tekezo/Karabiner-Elements/blob/master/src/apps/PreferencesWindow/PreferencesWindow/Resources/simple_modifications.json">(list)</a>
              </td>
            </tr>
            <tr>
              <td><code>consumer_key_code</code></td>
              <td><code class="optional">optional</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>pointing_button</code></td>
              <td><code class="optional">optional</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>shell_command</code></td>
              <td><code class="optional">optional</code></td>
              <td></td>
            </tr>
            <tr>
              <td><code>select_input_source</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                You can find the current input source identifiers by <b>EventViewer &gt; Variables tab</b>.<br />
                <code>language</code>, <code>input_source_id</code> and <code>input_mode_id</code> are optional.
                <code>select_input_source</code> finds the input source by the specified regexs.
              </td>
            </tr>
            <tr>
              <td><code>set_variable</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Set internal variable value by <code>set_variable</code>.<br />
                It's designed to use with <code>variable_if</code> and <code>variable_unless</code> conditions.<br />
                You can confirm the current variables state in <b>EventViewer &gt; Variables tab</b>.
              </td>
            </tr>
            <tr>
              <td><code>mouse_key</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Move mouse pointer and scroll by <code>mouse_key</code>.<br />
                You can specify operations by combination of follows.<br />
                <ul>
                  <li><code>{ "x": speed }</code></li>
                  <li><code>{ "y": speed }</code></li>
                  <li><code>{ "vertical_wheel": speed }</code></li>
                  <li><code>{ "horizontal_wheel": speed }</code></li>
                  <li><code>{ "speed_multiplier": 1.0 }</code></li>
                </ul>

                Examples:<br />
                <ul>
                  <li>move left: <code>{ "mouse_key": { "x": -1536 } }</code></li>
                  <li>move right: <code>{ "mouse_key": { "x": 1536 } }</code></li>
                  <li>move up: <code>{ "mouse_key": { "y": -1536 } }</code></li>
                  <li>move down: <code>{ "mouse_key": { "y": 1536 } }</code></li>
                  <li>scroll left: <code>{ "mouse_key": { "horizontal_wheel": 32 } }</code></li>
                  <li>scroll right: <code>{ "mouse_key": { "horizontal_wheel": -32 } }</code></li>
                  <li>scroll up: <code>{ "mouse_key": { "vertical_wheel": -32 } }</code></li>
                  <li>scroll down: <code>{ "mouse_key": { "vertical_wheel": 32 } }</code></li>
                </ul>

                <ul>
                  <li>fast move left: <code>{ "mouse_key": { "x": -3072 } }</code></li>
                  <li>fast move right: <code>{ "mouse_key": { "x": 3072 } }</code></li>
                  <li>fast move up: <code>{ "mouse_key": { "y": -3072 } }</code></li>
                  <li>fast move down: <code>{ "mouse_key": { "y": 3072 } }</code></li>
                  <li>fast scroll left: <code>{ "mouse_key": { "horizontal_wheel": 64 } }</code></li>
                  <li>fast scroll right: <code>{ "mouse_key": { "horizontal_wheel": -64 } }</code></li>
                  <li>fast scroll up: <code>{ "mouse_key": { "vertical_wheel": -64 } }</code></li>
                  <li>fast scroll down: <code>{ "mouse_key": { "vertical_wheel": 64 } }</code></li>
                </ul>

                <ul>
                  <li>speed multiplier x2: <code>{ "mouse_key": { "speed_multiplier": 2.0 } }</code></li>
                  <li>speed multiplier /2: <code>{ "mouse_key": { "speed_multiplier": 0.5 } }</code></li>
                </ul>

                <div class="alert alert-info" role="alert">
                  Note:<br />
                  Speed and direction depend on <b>System Preferences &gt; Mouse</b> configuration.
                </div>
              </td>
            </tr>
            <tr>
              <td><code>modifiers</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                Specify modifiers.
              </td>
            </tr>
            <tr>
              <td><code>lazy</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <p>
                  <code>true</code> or <code>false</code>. The default value is <code>false</code>.
                </p>
                <p>
                  <code>lazy</code> parameter works with modifier. (e.g., <code>"key_code": "left_shift"</code>)<br />
                  When <code>"lazy": true</code>, the modifier works as the lazy modifier.<br />
                  The lazy modifier does not send own key events until another key is pressed together.
                </p>
              </td>
            </tr>
            <tr>
              <td><code>repeat</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <p>
                  <code>true</code> or <code>false</code>. The default value is <code>true</code>.
                </p>
                <p>
                  When <code>"repeat": false</code>, both <b>key_down</b> and <b>key_up</b> events are sent when you press the key.<br />
                  (When <code>"repeat": true</code>, <b>key_up</b> event is sent when you release the key.)
                </p>
                <p>
                  This behavior suppresses the key repeating when <code>"repeat": false</code>.
                </p>
                <div class="alert alert-info" role="alert">
                  Note:<br />
                  When you want to use <code>"repeat": false</code>, you have to set <code>repeat</code> in the last to event if you have multiple to events in a manipulator.
                </div>
              </td>
            </tr>
            <tr>
              <td><code>halt</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <p>
                  <code>true</code> or <code>false</code>. The default value is <code>false</code>.
                </p>
                <p>
                  The typical usage of <code>halt</code> is to cancel <code>to_after_key_up</code> if <code>to_if_alone</code> or <code>to_if_held_down</code> is triggered.
                </p>
                <p>
                  If <code>"halt": true</code> exists in <code>to_if_alone</code> or <code>to_if_held_down</code>, the <code>to_after_key_up</code> is suppressed when <code>to_if_alone</code> or <code>to_if_held_down</code> is triggered.
                </p>
                <p>
                  An example: <a target="_blank" href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/example_halt.json">https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/example_halt.json</a>
                </p>
              </td>
            </tr>
            <tr>
              <td><code>hold_down_milliseconds</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                <p>
                  An integer value. The default value is <code>0</code>.
                </p>
                <p>
                  Specify a key press period for when both key down and key up events are posted at the same time (e.g. <code>to_if_alone</code>)
                </p>
                <p>
                  Generally <code>hold_down_milliseconds</code> is used with <code>"key_code": "caps_lock"</code>.
                </p>
              </td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="to-event-definition-modifiers-list">The list of modifiers in to definition</h3>

        <ul>
          <li><code>caps_lock</code></li>
          <li><code>left_command</code></li>
          <li><code>left_control</code></li>
          <li><code>left_option</code></li>
          <li><code>left_shift</code></li>
          <li><code>right_command</code></li>
          <li><code>right_control</code></li>
          <li><code>right_option</code></li>
          <li><code>right_shift</code></li>
          <li><code>fn</code></li>
        </ul>


        <hr class="horizontal-separator thin" />

        <h3 id="to-if-alone">Detail of <code>to_if_alone</code></h3>

        <p>
          <code>to_if_alone</code> posts events when the <b>from key</b> is pressed alone.<br />
          The events are posted at the <b>from key</b> is released.
        </p>

        <h4 id="to-if-alone-cancellation">About cancellation</h4>

        <p>
          <code>to_if_alone</code> is canceled if other events (keys, buttons or scroll wheel) is happen while the <b>from key</b> is pressed down.
        </p>
        <p>
          The cancellation also happens when you press <b>from key</b> long. (The default timeout is 1000 milliseconds.)<br />
          You can adjust the timeout milliseconds by <code>parameters &gt; basic.to_if_alone_timeout_milliseconds</code>.<br />
          The following examples set the timeout 500 milliseconds.
        </p>

<pre class="prettyprint lang-json">{
    "from": ...,
    "to": ...,
    "to_if_alone": [
        {
            "key_code": "escape"
        }
    ],
    "parameters": {
        "basic.to_if_alone_timeout_milliseconds": 500
    },
    "type": "basic"
}</pre>
        <h4 id="to-if-alone-keyboard-repeat">About keyboard repeat</h4>

        <p>
          <code>to_if_alone</code> posts both <b>key_down</b> and <b>key_up</b> events at the same time.<br />
          Thus, you cannot use key repeat for <code>to_if_alone</code> events.
        </p>


        <hr class="horizontal-separator thin" />

        <h3 id="to-if-held-down">Detail of <code>to_if_held_down</code></h3>

        <p>
          <code>to_if_held_down</code> posts events when the <b>from key</b> is held down.<br />
        </p>

        <p>
          If <code>to</code> events are specified, <code>to</code> events are released before <code>to_if_held_down</code> are posted.
        </p>


        <hr class="horizontal-separator" />

        <h2 id="condition-definition">condition definition</h2>

        <h3 id="condition-definition-frontmost-application"><code>frontmost_application_if</code> and <code>frontmost_application_unless</code></h3>

<pre class="prettyprint lang-json">{
    "type": "frontmost_application_if",
    "bundle_identifiers": [
        bundle identifier regex,
        bundle identifier regex,
        ...
    ],
    "file_paths": [
        file path regex,
        file path regex,
        ...
    ]
}</pre>
        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>
                Either:
                <ul>
                  <li><code>"type": "frontmost_application_if"</code></li>
                  <li><code>"type": "frontmost_application_unless"</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>bundle_identifiers</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                bundle identifier regexs.<br />
                You can examine application's bundle identifier in <b>EventViewer &gt; Frontmost Application tab</b>.
              </td>
            </tr>
            <tr>
              <td><code>file_paths</code></td>
              <td><code class="optional">optional</code></td>
              <td>
                file path regexs.<br />
                You can examine application's file path in <b>EventViewer &gt; Frontmost Application tab</b>.
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A condition description for human.</td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="condition-definition-device"><code>device_if</code> and <code>device_unless</code></h3>

<pre class="prettyprint lang-json">{
    "type": "device_if",
    "identifiers": [
        {
            "vendor_id": 1111,
            "product_id": 2222,
            "description": "my keyboard 1"
        },
        {
            "vendor_id": 3333,
            "product_id": 4444,
            "description": "my keyboard 2"
        },
        ...
    ]
}</pre>
        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>
                Either:
                <ul>
                  <li><code>"type": "device_if"</code></li>
                  <li><code>"type": "device_unless"</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>identifiers</code></td>
              <td><code class="required">required</code></td>
              <td>
                <p>
                  Target device designation by the following identifiers.<br />
                  You can examine them in <b>EventViewer &gt; Devices tab</b>.
                </p>

                <ul>
                  <li><code>vendor_id</code></li>
                  <li><code>product_id</code></li>
                  <li><code>location_id</code></li>
                  <li><code>is_keyboard</code></li>
                  <li><code>is_pointing_device</code></li>
                </ul>

                <p>
                  All identifiers are optional.
                </p>
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A condition description for human.</td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="condition-definition-keyboard-type"><code>keyboard_type_if</code> and <code>keyboard_type_unless</code></h3>

<pre class="prettyprint lang-json">{
    "type": "keyboard_type_if",
    "keyboard_types": [
        "ansi",
        "iso"
    ]
}</pre>
        <div class="alert alert-info" role="alert">
          It's useful for supporting "change control-[ to escape" with all keyboard types.
          <a target="_blank" href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/example_keyboard_type.json">(example json)</a><br />
          Some characters have different key code for each keyboard types.<br />
          (e,g,. <b>[</b> is <code>open_bracket</code> on <b>ansi</b> and <b>iso</b>, <code>close_bracket</code> on <b>jis</b>.)
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>
                Either:
                <ul>
                  <li><code>"type": "keyboard_type_if"</code></li>
                  <li><code>"type": "keyboard_type_unless"</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>keyboard_types</code></td>
              <td><code class="required">required</code></td>
              <td>
                Target keyboard types.
                <ul>
                  <li><code>ansi</code></li>
                  <li><code>iso</code></li>
                  <li><code>jis</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A condition description for human.</td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="condition-definition-input-source"><code>input_source_if</code> and <code>input_source_unless</code></h3>

<pre class="prettyprint lang-json">{
    "type": "input_source_if",
    "input_sources": [
        {
            "language": "language regex",
            "input_source_id": "input source id regex",
            "input_mode_id": "input mode id regex"
        },
        {
            "language": "language regex",
            "input_source_id": "input source id regex",
            "input_mode_id": "input mode id regex"
        },
        ...
    ]
}</pre>
        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>
                Either:
                <ul>
                  <li><code>"type": "input_source_if"</code></li>
                  <li><code>"type": "input_source_unless"</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>input_sources</code></td>
              <td><code class="required">required</code></td>
              <td>
                <p>
                  Target input source definitions.<br />
                  You can find the current input source identifiers by <b>EventViewer &gt; Variables tab</b>.<br />
                </p>
                <p>
                  <code>language</code>, <code>input_source_id</code> and <code>input_mode_id</code> are optional.
                </p>
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A condition description for human.</td>
            </tr>
          </tbody>
        </table>

        <hr class="horizontal-separator thin" />

        <h3 id="condition-definition-variable"><code>variable_if</code> and <code>variable_unless</code></h3>

<pre class="prettyprint lang-json">{
    "type": "variable_if",
    "name": "variable name",
    "value": variable value
}</pre>
        <div class="alert alert-info" role="alert">
          <code>variable_if</code> and <code>variable_unless</code> are designed to use with <code>set_variable</code>.
        </div>

        <table class="table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Required</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td><code class="required">required</code></td>
              <td>
                Either:
                <ul>
                  <li><code>"type": "variable_if"</code></li>
                  <li><code>"type": "variable_unless"</code></li>
                </ul>
              </td>
            </tr>
            <tr>
              <td><code>name</code></td>
              <td><code class="required">required</code></td>
              <td>
                Target variable name.
              </td>
            </tr>
            <tr>
              <td><code>value</code></td>
              <td><code class="required">required</code></td>
              <td>
                Target variable value.
              </td>
            </tr>
            <tr>
              <td><code>description</code></td>
              <td><code class="optional">optional</code></td>
              <td>A condition description for human.</td>
            </tr>
          </tbody>
        </table>
      </section>

      <section>
        <div class="page-header">
          <h1>Change mouse motion to scroll</h1>
        </div>

        <h2 id="mouse-motion-to-scroll">mouse_motion_to_scroll</h2>

        <div class="alert alert-info">
          <code>mouse_motion_to_scroll</code> is available since Karabiner-Elements 12.3.0.
        </div>

        <p>
          Use <code>"type": "mouse_motion_to_scroll"</code> instead of <code>"type": "basic"</code>.
        </p>

<pre class="prettyprint lang-json">{
    "type": "mouse_motion_to_scroll",

    "from": {
        "modifiers": {
            "mandatory": [
                modifier,
                modifier,
                ...
            ],
            "optional": [
                modifier,
                modifier,
                ...
            ]
        }
    },
    "conditions": [
        condition definition,
        condition definition,
        ...
    ],
    "options": {
        "speed_multiplier": 1.0
    }
}</pre>
        <h3>Typical examples</h3>
        <p>
          <a target="_blank" href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/mouse_motion_to_scroll.json">mouse_motion_to_scroll.json</a>
        </p>
        <p>
          <code>button4</code> and <code>button5</code> in <a target="_blank" href="https://github.com/pqrs-org/KE-complex_modifications/blob/master/docs/json/mouse_motion_to_scroll.json">mouse_motion_to_scroll.json</a> are using <a href="#virtual-modifier">a virtual modifier</a>
          (using a <code>enable_mouse_motion_to_scroll</code> variable as flag).
        </p>
      </section>

      <section>
        <div class="page-header">
          <h1>MultitouchExtension</h1>
        </div>

        <h2 id="multitouch-extension">MultitouchExtension integration</h2>

        <div class="alert alert-info">
          Karabiner-MultitouchExtension is available since Karabiner-Elements 12.6.9
        </div>

        <p>
          <a href="document.html#multitouch-extension" target="_blank">
            Karabiner-MultitouchExtension
          </a>
          allows you to change keys only when the finger is on the trackpad.
        </p>

        <p>
          You can use <code>variable_if</code> or <code>variable_unless</code> to determine either the finger is on trackpad.
        </p>

        <h3>Example</h3>

        <p>
          The following json changes <code>k</code> key to <code>up_arrow</code> when the finger is on the trackpad.
        </p>

<pre class="prettyprint lang-json">{
  "type": "basic",
  "from": {
    "key_code": "k"
  },
  "to": [
    {
      "key_code": "up_arrow"
    }
  ],
  "conditions": [
    {
      "type": "variable_unless",
      "name": "multitouch_extension_finger_count_total",
      "value": 0
    }
  ]
}</pre>
        <h3>Variables</h3>

        <p>
          Karabiner-MultitouchExtension changes the following variables when the finger count on the trackpad is changed.
        </p>

        <table class="table">
          <thead>
            <tr>
              <th>Variable name</th>
              <th>Variable value</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>multitouch_extension_finger_count_total</td>
              <td>Total count of fingers on the trackpad</td>
            </tr>
            <tr>
              <td>multitouch_extension_finger_count_upper_half_area</td>
              <td>Count of fingers on the upper half of trackpad</td>
            </tr>
            <tr>
              <td>multitouch_extension_finger_count_lower_half_area</td>
              <td>Count of fingers on the lower half of trackpad</td>
            </tr>
            <tr>
              <td>multitouch_extension_finger_count_left_half_area</td>
              <td>Count of fingers on the left half of trackpad</td>
            </tr>
            <tr>
              <td>multitouch_extension_finger_count_right_half_area</td>
              <td>Count of fingers on the right half of trackpad</td>
            </tr>
          </tbody>
        </table>

        <div class="alert alert-info">
          Note:<br/>
          <p>
            <code>finger_count_total == finger_count_upper_half_area + finger_count_lower_half_area</code>
          </p>
          <p>
            <code>finger_count_total == finger_count_left_half_area + finger_count_right_half_area</code>
          </p>
        </div>

        <p>
          You can confirm the variables state on <b>Karabiner-EventViewer &gt; Variables</b>.
        </p>

        <div class="row">
          <div class="col-lg-8">
<a data-toggle="modal" href="#lightbox-3" class="thumbnail">
  <img src="img/karabiner-elements-eventviewer-variables@2x.png" alt="Variables" />
</a>
<div class="modal fade" id="lightbox-3" tabindex="30003">
  <div class="modal-dialog clickable" style="width: 934px;">
    <div class="modal-content">
      <div class="modal-body">
        <img src="img/karabiner-elements-eventviewer-variables@2x.png" alt="Variables" style="width: 100%" />
      </div>
    </div>
  </div>
</div>
          </div>
        </div>
      </section>

      <section>
        <div class="page-header">
          <h1>Help</h1>
        </div>

        <h2 id="virtual-modifier">Help: Virtual modifier</h2>
        <p>Use variables (<code>set_variable</code> and <code>variable_if</code>) if you want to add your own modifiers.</p>

        <h3>Example:</h3>
        <p>
          The following manipulator definitions change <b>keypad_1</b> to virtual modifier.
        </p>
        <ul>
          <li>Use <b>keypad_1</b> as virtual modifier (<b>my_modifier_1</b>).</li>
          <li>Change <b>keypad_1</b> + <b>a</b> to <b>mission_control</b>.</li>
          <li>Change <b>keypad_1</b> + <b>s</b> to <b>launchpad</b>.</li>
        </ul>

<pre class="prettyprint lang-json">[
    {
        "type": "basic",
        "from": {
            "key_code": "keypad_1",
            "modifiers": {
                "mandatory": [],
                "optional": [
                    "any"
                ]
            }
        },
        "to": [
            {
                "set_variable": {
                    "name": "my_modifier_1",
                    "value": 1
                }
            }
        ],
        "to_after_key_up": [
            {
                "set_variable": {
                    "name": "my_modifier_1",
                    "value": 0
                }
            }
        ]
    },

    {
        "type": "basic",
        "from": {
            "key_code": "a",
            "modifiers": {
                "mandatory": [],
                "optional": [
                    "any"
                ]
            }
        },
        "to": [
            {
                "key_code": "mission_control"
            }
        ],
        "conditions": [
            {
                "type": "variable_if",
                "name": "my_modifier_1",
                "value": 1
            }
        ]
    },

    {
        "type": "basic",
        "from": {
            "key_code": "s",
            "modifiers": {
                "mandatory": [],
                "optional": [
                    "any"
                ]
            }
        },
        "to": [
            {
                "key_code": "launchpad"
            }
        ],
        "conditions": [
            {
                "type": "variable_if",
                "name": "my_modifier_1",
                "value": 1
            }
        ]
    }
]</pre>      </section>
    </div>
    <div class="col-md-3">
      <div class="bs-docs-sidebar">
        <ul class="nav bs-sidenav">
              <li>
                <a href="#location">
                  File location
                </a>
              </li>
              <li>
                <a href="#typical-complex_modifications-examples">
                  Typical complex_modifications examples
                </a>
              </li>
              <li class="nav-header">Data structure</li>
              <li>
                <a href="#root-data-structure">
                  karabiner.json data structure
                </a>
              </li>
              <li class="nav-header">complex_modifications</li>
              <li>
                <a href="#complex_modifications-data-structure">
                  Data structure
                </a>
              </li>
              <li>
                <a href="#complex_modifications-manipulator-priority">
                  Manipulator priority
                </a>
              </li>
              <li>
                <a href="#complex_modifications-manipulator-definition">
                  Manipulator definition
                </a>
              </li>
              <li>
                <a href="#from-event-definition">
                  from event definition
                </a>
              </li>
              <li>
                <a href="#from-event-definition-modifiers">
                  Modifiers in from event definition
                </a>
              </li>
              <li>
                <a href="#from-event-definition-examples">
                  Examples
                </a>
              </li>
              <li>
                <a href="#from-event-definition-modifiers-list">
                  The list of modifiers in from definition
                </a>
              </li>
              <li>
                <a href="#simultaneous">
                  Detail of simultaneous
                </a>
              </li>
              <li>
                <a href="#to-event-definition">
                  to event definition
                </a>
              </li>
              <li>
                <a href="#to-event-definition-modifiers-list">
                  The list of modifiers in to definition
                </a>
              </li>
              <li>
                <a href="#to-if-alone">
                  Detail of to_if_alone
                </a>
              </li>
              <li>
                <a href="#to-if-held-down">
                  Detail of to_if_held_down
                </a>
              </li>
              <li class="nav-header">Condition definition</li>
              <li>
                <a href="#condition-definition-frontmost-application">
                  condition definition frontmost_application_if and frontmost_application_unless
                </a>
              </li>
              <li>
                <a href="#condition-definition-device">
                  condition definition device_if and device_unless
                </a>
              </li>
              <li>
                <a href="#condition-definition-keyboard-type">
                  condition definition keyboard_type_if and keyboard_type_unless
                </a>
              </li>
              <li>
                <a href="#condition-definition-input-source">
                  condition definition input_source_if and input_source_unless
                </a>
              </li>
              <li>
                <a href="#condition-definition-variable">
                  condition definition variable_if and variable_unless
                </a>
              </li>
              <li class="nav-header">Change mouse motion to scroll</li>
              <li>
                <a href="#mouse-motion-to-scroll">
                  mouse_motion_to_scroll
                </a>
              </li>
              <li class="nav-header">MultitouchExtension</li>
              <li>
                <a href="#multitouch-extension">
                  MultitouchExtension integration
                </a>
              </li>
              <li class="nav-header">Help</li>
              <li>
                <a href="#virtual-modifier">
                  Virtual modifier
                </a>
              </li>
        </ul>
      </div>
    </div>
  </div>
</div>


    <footer class="bs-docs-footer">
      <div class="container">
        <a href="#">Back to top</a>
      </div>
    </footer>

    <script src="/assets/jquery/jquery-2.1.4.min.js"></script>
    <script src="/assets/bootstrap/bootstrap-3.3.6/dist/js/bootstrap.min.js"></script>
      <script src="/assets/google-code-prettify/prettify.js" type="text/javascript"></script>
      <script type="text/javascript">jQuery(function(){ prettyPrint(); });</script>
      <script type="text/javascript" src="/assets/jquery/jquery.collapse.js"></script>
      <script type="text/javascript">jQuery(function(){ jQuery('#collapser').jqcollapse(); });</script>
    <script src="/assets/pqrs.js.3bf75c0e6a2fadabcc4147fa725d9740e841f9c6.2ff0e427375afd12e4a1c26f20f088db61ae067f.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      var GA_LOCAL_STORAGE_KEY = 'ga:clientId';

      if (window.localStorage) {
        ga('create', 'UA-56715024-1', {
          'storage': 'none',
          'clientId': localStorage.getItem(GA_LOCAL_STORAGE_KEY)
        });
        ga(function(tracker) {
          localStorage.setItem(GA_LOCAL_STORAGE_KEY, tracker.get('clientId'));
        });
      } else {
        ga('create', 'UA-56715024-1', 'auto');
      }

      ga('send', 'pageview');
    </script>
  </body>
</html>
